<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Log In</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>

<body>
     <!-- fixed navbar -->
     <div class="container-fluid">
        <div class="container-fluid nav justify-content-center myColor">
            <div class="d-flex p-1">
                <h5 class="p-1">FREE SHIPPING on all orders of </h5>
                <h4><strong class="d-flex text-warning"> PKR 5000 and above</strong></h4>
                <a class="nav-link active p-1" href="">
                    <strong class="text-light p-1 mx-1 rounded-3 ">Use Promo Code:SMIT</strong>
                </a>
            </div>
        </div>
        <!-- link navbar -->
        <nav class="navbar bg-body-light navbar-expand-lg">
            <div class="container-fluid">
                <div class="d-flex">
                    <i class="fa fa-phone fa-lg mx-2 hover d-flex">
                        <p class="navbar-brand fw-bold p-1"><small><em class="hover">123456789</em></small></p>
                    </i>
                    <i class="fa fa-envelope fa-lg hover d-flex">
                        <p class="fw-bold p-1"><small><em class="hover">query@bookslibrary.com</em></small></p>
                    </i>
                </div>

                <div class="d-flex nav-item dropdown">
                    <a class="navbar-brand mx-0 mt-0" href="#top" id="botm">
                        <img src="images/flag(1).jpeg" alt="flag" width="40">
                    </a>
                    <a class="nav-link dropdown-toggle bg-body-tertiary rounded-5 p-2 m-1" href="#"  role="button"
                        data-bs-toggle="dropdown" aria-expanded="false">
                        Select Language
                    </a>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item hover" href="#">Arabic</a></li>
                        <li><a class="dropdown-item hover" href="#">English</a></li>
                        <li><a class="dropdown-item hover" href="#">Urdu</a></li>
                    </ul>
                </div>
            </div>
        </nav>
    <!-- Main Navbar -->
    <nav class="navbar navbar-expand-lg bg-body-tertiary">
        <div class="container-fluid myColor">
            <div class="d-flex">
                <img class="" src="images/books.png" alt="bookslibrary" width="120px" height="85px">
                <h3 class="m-3 mx-2"><strong class="fs-1 hover">Library Books</strong></h3>
            </div>
            <button class="navbar-toggler border-white m-2" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation text-white border-white">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse p-4" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a class="nav-link active text-white  fs-4 hover mx-3 fw-bold" aria-current="page" href="./index.html">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link text-white fs-4 hover mx-3 fw-bold" href="./signUp.html">Register</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link text-white fw-bold fs-4 hover mx-3" href="./login.html">Login</a>
                    </li>
                </ul>
                <a href="./signUp.html">
                    <button class="myColor p-2 fw-bold border-warning rounded-3" type="submit">REGISTER</button>
                </a>
                <a href="./index.html">
                    <button class="myColor p-2 fw-bold border-warning rounded-3" type="submit">LOGOUT</button>
                </a>
            </div>
        </div>
    </nav>
    <!-- LOGIN FORM -->
    <div class="container">
        <div class="row">
            <div class="col-md-6 mb-3 mb-md-0">
                <div class="card border-5 m-5 border-info">
                    <div class="card-body bg-info-subtle">
                        <h2 class="m-3 myColor p-3 rounded-3">LOG IN</h2>
                        <form>
                            <div class="container mx-2 m-5">
                                <div class="mb-3">
                                    <label for="exampleFormControlInput1" class="form-label fw-bold">Email address</label>
                                    <input type="email" class="form-control" id="email" required placeholder="name@example.com">
                                </div>
                                <div class="mb-3">
                                    <label for="exampleFormControlInput1" class="form-label fw-bold">Password</label>
                                    <input type="password" class="form-control" id="password" required placeholder="use correct password">
                                </div>
                            </div>
                            <button id="Login" class="myColor border-warning rounded-3 fw-bold p-2 mx-5" type="submit" onsubmit="login(event)"> SIGN IN </button>
                        </form>
                    </div>
                </div>
            </div>
            <div class="col-md-6 mt-4">
                <div class="card-body border-info mt-2 rounded-2 d-flex flex-wrap justify-content-center">
                    <img src="images/book1.webp" alt="" class="mx-2 mb-3" width="150px" height="220px">
                    <img src="images/book2.jpeg" alt="" class="mx-2 mb-3" width="150px" height="220px">
                    <img src="images/book3.jpeg" alt="" class="mx-2 mb-3" width="150px" height="220px">
                    <img src="images/book4.jpeg" alt="" class="mx-2 mb-3" width="150px" height="220px">
                    <img src="images/book5.jpeg" alt="" class="mx-2 mb-3" width="150px" height="220px">
                    <img src="images/book6.jpg" alt="" class="mx-2 mb-3" width="150px" height="220px">
                </div>
            </div>
        </div>
    </div>
        
    <!-- function -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getDatabase, ref } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";
        import { getAuth, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

        // Replace with your Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBAywNTxWtbEwE0xo7-V8QFPl7W8z3_G9A",
            authDomain: "smit-71af3.firebaseapp.com",
            projectId: "smit-71af3",
            storageBucket: "smit-71af3.appspot.com",
            messagingSenderId: "114658621421",
            appId: "1:114658621421:web:b51f2cc815b78a28d359e4",
            measurementId: "G-9G2GWXWYVY"
        };
        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);
        const usersRef = ref(database, 'users');

        let login = (event) => {
            event.preventDefault();
            let email = document.getElementById("email").value;
            let password = document.getElementById("password").value;
            const auth = getAuth();
            signInWithEmailAndPassword(auth, email, password)
                .then((userCredential) => {
                    const user = userCredential.user;
                    console.log(user);

                    Swal.fire({
                        title: 'Success!',
                        text: `${user.email}, successfully logged in.`,
                        icon: 'success',
                        confirmButtonText: 'Go to Library',
                        allowOutsideClick: false
                    }).then((result) => {
                        if (result.isConfirmed) {
                            window.location.href = 'home.html';
                        }

                        usersRef.once('value').then(snapshot => {
                            snapshot.forEach(childSnapshot => {
                                const childData = childSnapshot.val();
                                console.log(childData);
                            });
                        });
                    });
                })
                .catch((error) => {
                    Swal.fire({
                        title: 'Error!',
                        text: 'The email or password that you have entered is incorrect, please try again',
                        icon: 'error',
                        confirmButtonText: 'OK'
                    });
                    console.error("Error:", error.message);
                });
        };

        addEventListener('submit', login);   
    </script>
    <script src="newfile.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

</body>

</html>